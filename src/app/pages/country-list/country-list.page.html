<ion-header>
  <ion-toolbar color="primary">
		<ion-buttons slot="start">
			<ion-menu-button></ion-menu-button>
			<ion-button
				*ngIf="countryChosen && !searchActive"
				(click)="backToList($event)">
				<ion-icon			
					name="arrow-back"
					size="sma">
				</ion-icon>
			</ion-button>

			<ion-button
				*ngIf="!countryChosen && !searchActive"
					(click)="onSearch($event)">
					<ion-icon name="search"></ion-icon>
				</ion-button>
		</ion-buttons>

		<ion-searchbar
			*ngIf="!countryChosen && searchActive"
			[(ngModel)]="searchInput"
			placeholder="Enter country name"
			[showCancelButton]="false"
			(ionInput)="onInput($event)"
			(ionClear)="onClear($event)"
			autocomplete="on"
			color="light"
			showCancelButton="true"
			class="country-searchbar">

		</ion-searchbar>
		
		<ion-item class="ion-no-padding source" color="primary">

			<ion-title class="ion-text-center">
				<ion-icon *ngIf="!countryChosen && !searchActive" item-start class="icon" name="globe" size="large"></ion-icon>
				<h4 *ngIf="countryChosen" class="toolbar-header">{{ countryName | uppercase }}</h4>
			</ion-title>

			<!--drop-down list of country regions, select one to change the country category and reload list of country-->
			<ion-select
				*ngIf="!countryChosen && !searchActive"
				interface="action-sheet"
				placeholder="Continent"
				[(ngModel)]="continent"
				(ionChange)="getContinentData($event)"
				cancelText="{{ 'COUNTRIES.cancel' | translate }}">
				<ion-select-option
					*ngFor="let continent of continents"
					value="{{ continent }}">
					{{ continent }}
				</ion-select-option>
			</ion-select>

			<!--option to open map view of country-->
			<ion-buttons slot="end">
				<ion-button
					*ngIf="countryChosen"
					(click)="presentPopover($event)">
					<ion-icon
						slot="icon-only"
						name="locate"
						size="large"
						color="light">
					</ion-icon>
				</ion-button>
				

			</ion-buttons>

		</ion-item>

  </ion-toolbar>
</ion-header>

<ion-content fullscreen [scrollEvents]="true">
	<ion-grid class="ion-no-padding">
		<ion-row>
			<ion-col size="12" size-sm="8" size-ms="8" size-xl="6" offset-sm="2" class="ion-no-padding">

				<!--display list of countries-->
				<div *ngIf="!countryChosen">
					<div 
						*ngFor="let country of countries; index as countryId"
						style="padding: 0;">
						<app-country-item
							[country]="country"
							(click)="getCountryDetail(country)">
						</app-country-item>
					</div>
				</div>
				
				<!--display chosen country in detail-->
				<div *ngIf="countryChosen">
					<app-detail-item
						[country]="country">
					</app-detail-item>
				</div>

			</ion-col>
		</ion-row>
	</ion-grid>
	<ion-fab vertical="center" horizontal="end" slot="fixed">
		<ion-fab-button fill="clear" *ngIf="countryChosen">
			<ion-icon name="heart" color="danger" size="large" (click)="addToFavourites()"></ion-icon>
		</ion-fab-button>
	</ion-fab>
<ion-content>